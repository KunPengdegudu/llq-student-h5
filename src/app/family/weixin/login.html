<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>零零期现金借款</title>
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta content="m.007fenqi.com" name="author"/>
    <meta content="yes" name="apple-mobile-web-app-capable"/>
    <meta content="yes" name="apple-touch-fullscreen"/>
    <meta content="black" name="apple-mobile-web-app-status-bar-style"/>
    <meta content="telephone=no, email=no" name="format-detection"/>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">

    <meta http-equiv="Expires" content="-1">
    <meta http-equiv="Cache-Control" content="no-cache">
    <meta http-equiv="Pragma" content="no-cache">

</head>
<body>

正在跳转...



<script type="text/javascript">

    function getRequestParam (url) {
        var theRequest = {};
        var index = url.indexOf("?");
        if (index != -1) {
            var str = url.substr(index + 1);

            var strs = str.split("&");
            for (var i = 0; i < strs.length; i++) {
                theRequest[strs[i].split("=")[0]] = strs[i].split("=")[1];
            }
        }
        return theRequest;
    }

    function getUrlWithParams (url, params) {
        var paramStr = '';

        var hasParam = (url.indexOf('?') > -1);

        if (params) {
            for (var param in params) {
                if (param && params[param] !== undefined) {
                    paramStr = paramStr + (((paramStr == '' && !hasParam) ? '?' : '&'));
                    paramStr = paramStr + param + '=' + params[param];
                }
            }
        }

        return url + paramStr;
    }

    //格式化参数
    function formatParams(data) {
        var arr = [];
        for (var name in data) {
            arr.push(encodeURIComponent(name) + "=" + encodeURIComponent(data[name]));
        }
        arr.push(("v=" + Math.random()).replace(".",""));
        return arr.join("&");
    }

    function ajax(options) {
        options = options || {};
        options.type = (options.type || "GET").toUpperCase();
        options.dataType = options.dataType || "json";
        var params = formatParams(options.data);

        var xhr;
        //创建 - 非IE6 - 第一步
        if (window.XMLHttpRequest) {
            xhr = new XMLHttpRequest();
        } else { //IE6及其以下版本浏览器
            xhr = new ActiveXObject('Microsoft.XMLHTTP');
        }

        //接收 - 第三步
        xhr.onreadystatechange = function () {
            if (xhr.readyState == 4) {
                var status = xhr.status;
                if (status >= 200 && status < 300) {
                    options.success && options.success(xhr.responseText, xhr.responseXML);
                } else {
                    options.fail && options.fail(status);
                }
            }
        };

        //连接 和 发送 - 第二步
        if (options.type == "GET") {
            xhr.open("GET", options.url + "?" + params, true);
            xhr.send(null);
        } else if (options.type == "POST") {
            xhr.open("POST", options.url, true);
            //设置表单提交时的内容类型
            if (options.isForm) {
                xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded; charset=UTF-8");
            }

            xhr.send(params);
        }
    }

    function gotoUrl() {
        if (params && params.state) {
            window.location.href = window.decodeURIComponent(params.state);
        } else {
            window.location.href = "https://m.007fenqi.com";
        }

    }

    var href = window.location.href;
    var params = getRequestParam(href);
    var url = getUrlWithParams('/sns/weixin/login.json', {
        code: params.code
    });

    ajax({
        type: 'POST',
        url: url,
        success: gotoUrl,
        fail: gotoUrl
    });

</script>

</body>
</html>
